name: GO APP

on:
  push:
    branches:
    - "master"

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
    - uses: actions/setup-node@v2
        with:
          node-version: 14

    - run: |
        cd warehouse/web
        yarn install && yarn build
        cd ..
        go run ./main.go
    - name: Run Lint
      run: yarn run lint
      
    - run: |
        cd warehouse
        go get -u github.com/onsi/ginkgo/ginkgo
        ginkgo -r -keepGoing .
    - run: |
        cd warehouse && yarn install && yarn test
